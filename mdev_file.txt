                             MDEV File Format
                               4 March 2020

This document describes the MDEV file format.  For an overview of the MDEV
mechanism, see the MDEV documentation file.

MDEV files contain lines of ASCII text.  End of lines may be indicated by
either a carriage return character (CR, code 13), line feed (LF, code 10),
or a CR-LF combination.  Readers must be able to interpret any of these
end of line indications, on a line by line basis.

MDEV files are intended to be reasonably readable and editable by humans
using ordinary text editor programs.


Syntax

  Comments

    Lines where the body is any of:

      1 - Empty (0 characters).

      2 - Only blanks (code 32).

      3 - The first non-blank character is "*" (code 66).

    are ignored content-wise, and are collectively referred to as
    "comment" lines.  Comment lines are intended to aid human readability
    and understanding, although they have no effect on the data contents
    of MDEV files.

    Comment lines are generally ignored and not mentioned in the remainder
    of this document.  However, it is legal for one or more comment lines
    to between any two lines, at the start of the file, or at the end of
    the file.

  Commands and parameters

    Data is specified by commands.  Commands start with the command name
    keyword, followed by parameters unique to that command.  All keywords,
    which includeds command names, are case-insensitive.

    Parameters are separated from the command name and from each other by
    one or more blanks.

    Individual parameters may be enclosed in quotes ("...") or
    apostrophies ('...').  This is required if the parameter is a text
    string that contains any blank, or starts or ends with a quote or
    apostrohie.  The value of the parameter will be the string enclosed
    by, but not including the outer quotes or apostrophies.  To indicate a
    single character of the type used to enclose the string, that
    character must be doubled in the body of the string.  For example, the
    following two text parameters have the same value:

      "Don't say ""never""."
      'Don''t say "never".'

    Integer parameters have the format

      <radix>#<+-><digits>.

    RADIX is the number base (radix) in decimal, with the allowed range
    being 2-36.

    The "<+->" part can be either "+", "-", or be omitted.  This indicates
    the sign of the value.  Positive is implied with the sign is omitted.

    DIGITS is the digits of the number in the specified radix.  The normal
    digits 0-9 are used for digit values 0 to 9.  The letters A-Z or a-z
    are used for digit values 10 to 35.  Only digits with values less than
    the radix are allowed.  Leading zeros are allowed, but do not effect
    the resulting value.  A minimum of one digit is required.

    The "<radix>#" part may be omitted, in which case the radix is implied
    to be 10 (decimal).

    For example, the following integer parameters all have the decimal
    value of 249:

      249
      +00249
      10#249
      10#+249
      16#F9
      2#11111001

  Hierarchy

    The data in MDEV files is hierarchical.  The hierarchy is indicated by
    the indentation level (the number of blanks before the first non-blank
    character) of each line.  Top level data has 0 indentation (the first
    non-blank is in column 1).  Each successive level down in the
    hierarchy has an additional 2 characters of indentation.  For example,
    data one level below the top starts in column 3, two levels down in
    column 5, etc.

    All commands must be indented a multiple of 2 characters.  A command
    starting in column 4, for example, is illegal.

    There are no explicit commands to start and end subordinate blocks of
    data.  Data hierarchy is solely and ridgidly defined by the
    indentation level of each command.  For example, a subordinate block
    is ended when a command at a higher level is encountered.


MDEV file set

  MDEV files provide information for and about modular device modules.
  Source code for modules used in one build may be kept in various places.
  Modules specific to a particular firmware would usually be part of that
  firmware.  Modules for a class of related devices may be in their own
  source repository.  Modules for generic devices may be in yet other
  source repositories.

  The MDEV configuration program starts by reading the MDEV files in the
  source repository of the specific firmware being built.  Those MDEV
  files may reference other repositories.  The MDEV files in those
  repositories may reference more repositories, etc.

  All MDEV files in a repository are read when that repository is
  referenced.  There is no need for a "master" MDEV file per repository,
  for example.

  It is intended that each MDEV module includes one MDEV file in the
  repository, along with its source code and other files.  This MDEV file
  will be automatically found and read by the MDEV configuration program.


Commands
